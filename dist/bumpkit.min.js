!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Bumpkit=e()}}(function(){return function e(t,n,o){function r(u,c){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!c&&f)return f(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var a=n[u]={exports:{}};t[u][0].call(a.exports,function(e){var n=t[u][1][e];return r(n?n:e)},a,a.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,t){var n=function(e){var t=this,e=e||{},n=function(){this.duration=e.duration||.0625,this.frequency=e.frequency||256,this.output=e.output||t.destination,this.connect=function(e){this.output=e},this.play=function(e){var n=t.createOscillator();n.type=0,n.frequency.value=this.frequency,t.trigger(n,{when:e,output:this.output,duration:this.duration})}};return new n};t.exports={createBeep:n}},{}],2:[function(e,t){var n=function(e){var e=e||{},t={};return t.output=e.output||0,t.active=e.active||!0,t.pattern=e.pattern||[],t.connect=function(e){t.output=e},t.play=function(e){t.output.play(e)},window.addEventListener("step",function(e){var n=e.detail.step,o=e.detail.when;t.active&&1==t.pattern[n]&&t.play(o)}),t};t.exports={createClip:n}},{}],3:[function(e,t){var n=function(){var e=this;this.tempo=120,this.isPlaying=!1,this.loopLength=null,this.timeSignature=[4,4],this.stepResolution=16;var t=function(){return 60/e.tempo/4},n=0,o=0,r=0,i=new CustomEvent("step",{detail:{}}),u=function(t){if(!e.currentTime){e.createBufferSource()}i.detail.step=o,i.detail.when=t,window.dispatchEvent(i)},c=function(){for(var i=.1,f=25;n<e.currentTime+i;)u(n),n+=t(),o++,o==e.loopLength&&(o=0);r=setTimeout(function(){c()},f)},f=function(){e.isPlaying=!1,window.clearTimeout(r)};return this.playPause=function(){e.isPlaying?f():(o=0,n=e.currentTime,c(),e.isPlaying=!e.isPlaying)},this};t.exports=n},{}],4:[function(e,t){var n=e("./clock"),o=e("./mixer"),r=e("./clip"),i=e("./beep"),u=e("./sampler"),c=function(){try{var e=new AudioContext||new webkitAudioContext}catch(t){console.error("Web Audio API not supported in this browser")}return e.trigger=function(e,t){var t={when:t.when||0,offset:t.offset||0,duration:t.duration||0,output:t.output||0};e.connect(t.output),e.start(t.when,t.offset||0),t.duration&&e.stop(t.when+t.duration)},e.getArrayBuffer=function(e,t){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.open("GET",e,!0),n.send(),n.onload=function(){n.response||console.error("Could not load"),t(n.response)}},e.buffers={},e.loadBuffer=function(e,t){function n(n){o.decodeAudioData(n,function(n){o.buffers[e]=n,t&&t(n)})}var o=this;this.buffers[e]&&t&&t(this.buffers[e]),this.getArrayBuffer(e,function(e){n(e)})},e.initClock=n,e.initClock(),e.createMixer=o.createMixer,e.createBeep=i.createBeep,e.createSampler=u.createSampler,e.createClip=r.createClip,e};t.exports=c},{"./beep":1,"./clip":2,"./clock":3,"./mixer":5,"./sampler":6}],5:[function(e,t){var n=function(){var e=this,t={},n=function(){var t=e.createGain();return t.effectsNode=e.createGain(),t.mute=e.createGain(),t.volume=e.createGain(),t.effects=[],t.connect(t.effectsNode),t.effectsNode.connect(t.mute),t.mute.connect(t.volume),t.updateConnections=function(){t.effectsNode.disconnect(0),t.effectsNode.connect(t.effects[0]);for(var e=0;e<t.effects.length-1;e++){console.log("multiple effects",e);var n=t.effects[e+1];t.effects[e].disconnect(0),t.effects[e].connect(n)}t.effects[t.effects.length-1].connect(t.mute)},t.addEffect=function(e,n){var o=n||t.effects.length;t.splice(o,0,e),t.updateConnections()},t.connect=function(e){t.volume.connect(e)},t.toggleMute=function(){t.mute.gain.value=1-t.mute.gain.value},t};return t.master=new n,t.master.connect(e.destination),t.tracks=[],t.addTrack=function(){var e=new n;return e.connect(t.master),t.tracks.push(e),this},t.removeTrack=function(t){e.tracks.splice(t,1)},t};t.exports={createMixer:n}},{}],6:[function(e,t){var n=function(e){var t=this,e=e||{},n=function(){this.output=e.output||t.destination,this.offset=e.offset||0,this.duration=e.duration||.6,this.buffer=e.buffer||0,this.connect=function(e){this.output=e},this.play=function(e){var n=t.createBufferSource();n.buffer=this.buffer,t.trigger(n,{when:e,output:this.output,duration:this.duration})}};return new n};t.exports={createSampler:n}},{}]},{},[4])(4)});